{"remainingRequest":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\src\\views\\SelectedCertificate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\src\\views\\SelectedCertificate.vue","mtime":1618690604968},{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618336320238},{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1618336313969},{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618336320238},{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1618336503862}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJTZWxlY3RlZENlcnRpZmljYXRlIiwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICBjb21tb25OYW1lOiBudWxsLA0KICAgIGdpdmVuTmFtZTogbnVsbCwNCiAgICBzdXJuYW1lOiBudWxsLA0KICAgIG9yZ2FuaXphdGlvbjogbnVsbCwNCiAgICBvcmdhbml6YXRpb25hbFVuaXROYW1lOiBudWxsLA0KICAgIG9yZ2FuaXphdGlvbkVtYWlsOiBudWxsLA0KICAgIGNvdW50cnlDb2RlOiBudWxsLA0KICAgIGFsaWFzOiBudWxsLA0KICAgIGVuZERhdGU6IG51bGwsDQogICAgaXNzdWVyU2VyaWFsTnVtYmVyOiBudWxsLA0KICAgIGlzc3VlckFsaWFzOiBudWxsLA0KICAgIGNlcnRpZmljYXRlczogW10sDQogICAgY2VydGlmaWNhdGVUeXBlOiBudWxsLA0KICAgIGNlcnRpZmljYXRlUHVycG9zZVR5cGU6ICIiLA0KICAgIHNlcmlhbE5icjogbnVsbCwNCiAgICBpc0hpZGRlblJvbGU6IGZhbHNlLA0KICAgIGlzSGlkZGVuOiBmYWxzZSwNCiAgICB0b2tlbjogbnVsbA0KICB9KSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnNlcmlhbE5iciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzZXJpYWxOdW1iZXIiKTsNCiAgICB0aGlzLnRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7DQogICAgY29uc29sZS5sb2codGhpcy5zZXJpYWxOYnIpOw0KICAgIHRoaXMuaW5pdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdCgpIHsNCiAgICAgIHRoaXMuZ2V0Q2VydGlmaWNhdGUoKTsNCiAgICB9LA0KICAgIGdldENlcnRpZmljYXRlKCkgew0KICAgICAgY29uc29sZS5sb2codGhpcy5zZXJpYWxOYnIpOw0KICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAuZ2V0KA0KICAgICAgICAgICJodHRwczovL2xvY2FsaG9zdDo4MDgwL2NlcnRpZmljYXRlL2dldENlcnRpZmljYXRlLyIgKyB0aGlzLnNlcmlhbE5icg0KICAgICAgICAsew0KICAgICAgICBoZWFkZXJzOnsNCiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzoiQmVhcmVyICIrIHRoaXMudG9rZW4NCiAgICAgICAgfX0pDQogICAgICAgIC50aGVuKChyZXNwKSA9PiB7DQogICAgICAgICAgdGhpcy5zZXRDZXJ0aWZpY2F0ZUluZm8ocmVzcC5kYXRhKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpOw0KICAgICAgICAgIGlmIChyZXNwLmRhdGEuY2VydGlmaWNhdGVUeXBlID09ICJFTkRFTlRJVFkiIHx8IChyZXNwLmRhdGEuY2VydGlmaWNhdGVUeXBlID09ICJJTlRFUk1FRElBVEUiICAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9sZScpICE9ICdBRE1JTicpKXsNCiAgICAgICAgICAgIHRoaXMuaXNIaWRkZW4gPSB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvbGUnKSAhPSAnQURNSU4nKXsNCiAgICAgICAgICAgIHRoaXMuaXNIaWRkZW5Sb2xlID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChjb25zb2xlLmxvZygiRGlkbid0IHNldCBjZXJ0aWZpY2F0ZSBpbmZvISIpKTsNCiAgICB9LA0KICAgIHNldENlcnRpZmljYXRlSW5mbyhpdGVtKSB7DQogICAgICB0aGlzLmNvbW1vbk5hbWUgPSBpdGVtLmNvbW1vbk5hbWU7DQogICAgICB0aGlzLmdpdmVuTmFtZSA9IGl0ZW0uZ2l2ZW5OYW1lOw0KICAgICAgdGhpcy5zdXJuYW1lID0gaXRlbS5zdXJuYW1lOw0KICAgICAgdGhpcy5vcmdhbml6YXRpb24gPSBpdGVtLm9yZ2FuaXphdGlvbjsNCiAgICAgIHRoaXMub3JnYW5pemF0aW9uYWxVbml0TmFtZSA9IGl0ZW0ub3JnYW5pemF0aW9uYWxVbml0TmFtZTsNCiAgICAgIHRoaXMub3JnYW5pemF0aW9uRW1haWwgPSBpdGVtLm9yZ2FuaXphdGlvbkVtYWlsOw0KICAgICAgdGhpcy5jb3VudHJ5Q29kZSA9IGl0ZW0uY291bnRyeUNvZGU7DQogICAgICB0aGlzLmFsaWFzID0gaXRlbS5hbGlhczsNCiAgICAgIHRoaXMuZW5kRGF0ZSA9IGl0ZW0uZW5kRGF0ZTsNCiAgICAgIHRoaXMuY2VydGlmaWNhdGVUeXBlID0gaXRlbS5jZXJ0aWZpY2F0ZVR5cGU7DQogICAgICB0aGlzLmNlcnRpZmljYXRlUHVycG9zZVR5cGUgPSBpdGVtLmNlcnRpZmljYXRlUHVycG9zZVR5cGU7DQogICAgICB0aGlzLmlzc3VlclNlcmlhbE51bWJlciA9IGl0ZW0uaXNzdWVyU2VyaWFsTnVtYmVyOw0KICAgICAgdGhpcy5pc3N1ZXJBbGlhcyA9IGl0ZW0uaXNzdWVyU2VyaWFsTnVtYmVyOw0KICAgIH0sDQogICAgY3JlYXRlQ2VydGlmaWNhdGUoKSB7DQogICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVuZERhdGUiLCB0aGlzLmVuZERhdGUpOw0KICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpc3N1ZXJBbGlhcyIsIHRoaXMuYWxpYXMpOw0KICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpc3N1ZXJTZXJpYWxOdW1iZXIiLCB0aGlzLnNlcmlhbE5icik7DQogICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MS9jcmVhdGVPdGhlckNlcnRpZmljYXRlcyI7DQogICAgfSwNCiAgICByZXZva2VDZXJ0aWZpY2F0ZSgpIHsNCiAgICAgIHRoaXMuJGh0dHANCiAgICAgICAgLnB1dCgNCiAgICAgICAgICAiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9jZXJ0aWZpY2F0ZS9yZXZva2VDZXJ0aWZpY2F0ZS8iICsgdGhpcy5zZXJpYWxOYnINCiAgICAgICAgICAsIHt9LCB7DQogICAgICAgICAgICBoZWFkZXJzOnsNCiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiJCZWFyZXIgIisgdGhpcy50b2tlbg0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigocmVzcCkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YSk7DQogICAgICAgICAgYWxlcnQoIllvdSBoYXZlIHN1Y2Nlc3NmdWxseSByZXZva2VkIHRoZSBjZXJ0aWZpY2F0ZS4iKTsNCiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJodHRwczovL2xvY2FsaG9zdDo4MDgxL2ludmFsaWRDZXJ0aWZpY2F0ZXMiOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7DQogICAgfSwNCiAgICBkb3dubG9hZENlcnRpZmljYXRlKCkgew0KICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAuZ2V0KCJodHRwczovL2xvY2FsaG9zdDo4MDgwL2NlcnRpZmljYXRlL2xvYWRUb0ZpbGUvIiArIHRoaXMuc2VyaWFsTmJyLCB7DQogICAgICAgIGhlYWRlcnM6ew0KICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiJCZWFyZXIgIisgdGhpcy50b2tlbg0KICAgICAgICB9fSkNCiAgICAgICAgLnRoZW4oKHJlc3ApID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpOw0KICAgICAgICAgIGFsZXJ0KCJTdWNjZXNzZnVsbHkgZG93bmxvYWRlZCB0aGUgY2VydGlmaWNhdGUuIik7DQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["SelectedCertificate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SelectedCertificate.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <br />\r\n    <v-container fluid class=\"container\">\r\n      <v-row aria-rowspan=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Certificate purpose type\"\r\n            v-model=\"certificatePurposeType\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row aria-rowspan=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Common name\"\r\n            v-model=\"commonName\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Given name\"\r\n            v-model=\"givenName\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Surname\"\r\n            v-model=\"surname\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Organization\"\r\n            v-model=\"organization\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Organizational unit name\"\r\n            v-model=\"organizationalUnitName\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Organization email\"\r\n            v-model=\"organizationEmail\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Country code\"\r\n            v-model=\"countryCode\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Alias \"\r\n            v-model=\"alias\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"End date\"\r\n            v-model=\"endDate\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Certificate type\"\r\n            v-model=\"certificateType\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <div class=\"center\">\r\n        <v-btn\r\n          v-on:click=\"createCertificate\"\r\n          color=\"primary\"\r\n          large\r\n          elevation=\"20\"\r\n          v-show=\"!isHidden\"\r\n          >Create</v-btn\r\n        >\r\n      </div>\r\n\r\n      <div class=\"center\">\r\n        <v-btn\r\n          v-on:click=\"revokeCertificate\"\r\n          v-show=\"!isHiddenRole\"\r\n          color=\"primary\"\r\n          large\r\n          elevation=\"20\"\r\n          >Revoke</v-btn\r\n        >\r\n      </div>\r\n\r\n      <div class=\"center\">\r\n        <v-btn\r\n          v-on:click=\"downloadCertificate\"\r\n          color=\"primary\"\r\n          large\r\n          elevation=\"20\"\r\n          >Download</v-btn\r\n        >\r\n      </div>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SelectedCertificate\",\r\n  data: () => ({\r\n    commonName: null,\r\n    givenName: null,\r\n    surname: null,\r\n    organization: null,\r\n    organizationalUnitName: null,\r\n    organizationEmail: null,\r\n    countryCode: null,\r\n    alias: null,\r\n    endDate: null,\r\n    issuerSerialNumber: null,\r\n    issuerAlias: null,\r\n    certificates: [],\r\n    certificateType: null,\r\n    certificatePurposeType: \"\",\r\n    serialNbr: null,\r\n    isHiddenRole: false,\r\n    isHidden: false,\r\n    token: null\r\n  }),\r\n  mounted() {\r\n    this.serialNbr = localStorage.getItem(\"serialNumber\");\r\n    this.token = localStorage.getItem(\"token\");\r\n    console.log(this.serialNbr);\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getCertificate();\r\n    },\r\n    getCertificate() {\r\n      console.log(this.serialNbr);\r\n      this.$http\r\n        .get(\r\n          \"https://localhost:8080/certificate/getCertificate/\" + this.serialNbr\r\n        ,{\r\n        headers:{\r\n            'Authorization':\"Bearer \"+ this.token\r\n        }})\r\n        .then((resp) => {\r\n          this.setCertificateInfo(resp.data);\r\n          console.log(resp.data);\r\n          if (resp.data.certificateType == \"ENDENTITY\" || (resp.data.certificateType == \"INTERMEDIATE\"  && localStorage.getItem('role') != 'ADMIN')){\r\n            this.isHidden = true;\r\n          }\r\n          if (localStorage.getItem('role') != 'ADMIN'){\r\n            this.isHiddenRole = true;\r\n          }\r\n        })\r\n        .catch(console.log(\"Didn't set certificate info!\"));\r\n    },\r\n    setCertificateInfo(item) {\r\n      this.commonName = item.commonName;\r\n      this.givenName = item.givenName;\r\n      this.surname = item.surname;\r\n      this.organization = item.organization;\r\n      this.organizationalUnitName = item.organizationalUnitName;\r\n      this.organizationEmail = item.organizationEmail;\r\n      this.countryCode = item.countryCode;\r\n      this.alias = item.alias;\r\n      this.endDate = item.endDate;\r\n      this.certificateType = item.certificateType;\r\n      this.certificatePurposeType = item.certificatePurposeType;\r\n      this.issuerSerialNumber = item.issuerSerialNumber;\r\n      this.issuerAlias = item.issuerSerialNumber;\r\n    },\r\n    createCertificate() {\r\n       localStorage.setItem(\"endDate\", this.endDate);\r\n       localStorage.setItem(\"issuerAlias\", this.alias);\r\n       localStorage.setItem(\"issuerSerialNumber\", this.serialNbr);\r\n       window.location.href = \"https://localhost:8081/createOtherCertificates\";\r\n    },\r\n    revokeCertificate() {\r\n      this.$http\r\n        .put(\r\n          \"https://localhost:8080/certificate/revokeCertificate/\" + this.serialNbr\r\n          , {}, {\r\n            headers:{\r\n              'Authorization':\"Bearer \"+ this.token\r\n            }\r\n        })\r\n        .then((resp) => {\r\n          console.log(resp.data);\r\n          alert(\"You have successfully revoked the certificate.\");\r\n          window.location.href = \"https://localhost:8081/invalidCertificates\";\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n    downloadCertificate() {\r\n      this.$http\r\n        .get(\"https://localhost:8080/certificate/loadToFile/\" + this.serialNbr, {\r\n        headers:{\r\n            'Authorization':\"Bearer \"+ this.token\r\n        }})\r\n        .then((resp) => {\r\n          console.log(resp.data);\r\n          alert(\"Successfully downloaded the certificate.\");\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.combo {\r\n  width: 25%;\r\n  margin-left: 42%;\r\n}\r\n\r\n.center {\r\n  margin-left: 50%;\r\n  padding: 10px;\r\n}\r\n</style>\r\n"]}]}