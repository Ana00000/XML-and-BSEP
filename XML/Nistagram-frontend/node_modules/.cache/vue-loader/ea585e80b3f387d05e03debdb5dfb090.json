{"remainingRequest":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\src\\views\\SelectedCertificate.vue?vue&type=style&index=0&id=0cce93b2&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\src\\views\\SelectedCertificate.vue","mtime":1618690604968},{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1618336343751},{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1618336503879},{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618336320238},{"path":"C:\\Users\\Asus\\Desktop\\XML i veb servisi\\XML-and-BSEP\\BSEP\\bsep\\src\\main\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1618336503862}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNvbWJvIHsNCiAgd2lkdGg6IDI1JTsNCiAgbWFyZ2luLWxlZnQ6IDQyJTsNCn0NCg0KLmNlbnRlciB7DQogIG1hcmdpbi1sZWZ0OiA1MCU7DQogIHBhZGRpbmc6IDEwcHg7DQp9DQo="},{"version":3,"sources":["SelectedCertificate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsRA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"SelectedCertificate.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <br />\r\n    <v-container fluid class=\"container\">\r\n      <v-row aria-rowspan=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Certificate purpose type\"\r\n            v-model=\"certificatePurposeType\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row aria-rowspan=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Common name\"\r\n            v-model=\"commonName\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Given name\"\r\n            v-model=\"givenName\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Surname\"\r\n            v-model=\"surname\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Organization\"\r\n            v-model=\"organization\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Organizational unit name\"\r\n            v-model=\"organizationalUnitName\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Organization email\"\r\n            v-model=\"organizationEmail\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"1\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Country code\"\r\n            v-model=\"countryCode\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Alias \"\r\n            v-model=\"alias\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"End date\"\r\n            v-model=\"endDate\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <v-row rows=\"2\">\r\n        <v-col cols=\"5\" />\r\n        <v-col cols=\"3\">\r\n          <v-text-field\r\n            label=\"Certificate type\"\r\n            v-model=\"certificateType\"\r\n            color=\"light-blue darken-4\"\r\n            readonly\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <div class=\"center\">\r\n        <v-btn\r\n          v-on:click=\"createCertificate\"\r\n          color=\"primary\"\r\n          large\r\n          elevation=\"20\"\r\n          v-show=\"!isHidden\"\r\n          >Create</v-btn\r\n        >\r\n      </div>\r\n\r\n      <div class=\"center\">\r\n        <v-btn\r\n          v-on:click=\"revokeCertificate\"\r\n          v-show=\"!isHiddenRole\"\r\n          color=\"primary\"\r\n          large\r\n          elevation=\"20\"\r\n          >Revoke</v-btn\r\n        >\r\n      </div>\r\n\r\n      <div class=\"center\">\r\n        <v-btn\r\n          v-on:click=\"downloadCertificate\"\r\n          color=\"primary\"\r\n          large\r\n          elevation=\"20\"\r\n          >Download</v-btn\r\n        >\r\n      </div>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SelectedCertificate\",\r\n  data: () => ({\r\n    commonName: null,\r\n    givenName: null,\r\n    surname: null,\r\n    organization: null,\r\n    organizationalUnitName: null,\r\n    organizationEmail: null,\r\n    countryCode: null,\r\n    alias: null,\r\n    endDate: null,\r\n    issuerSerialNumber: null,\r\n    issuerAlias: null,\r\n    certificates: [],\r\n    certificateType: null,\r\n    certificatePurposeType: \"\",\r\n    serialNbr: null,\r\n    isHiddenRole: false,\r\n    isHidden: false,\r\n    token: null\r\n  }),\r\n  mounted() {\r\n    this.serialNbr = localStorage.getItem(\"serialNumber\");\r\n    this.token = localStorage.getItem(\"token\");\r\n    console.log(this.serialNbr);\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getCertificate();\r\n    },\r\n    getCertificate() {\r\n      console.log(this.serialNbr);\r\n      this.$http\r\n        .get(\r\n          \"https://localhost:8080/certificate/getCertificate/\" + this.serialNbr\r\n        ,{\r\n        headers:{\r\n            'Authorization':\"Bearer \"+ this.token\r\n        }})\r\n        .then((resp) => {\r\n          this.setCertificateInfo(resp.data);\r\n          console.log(resp.data);\r\n          if (resp.data.certificateType == \"ENDENTITY\" || (resp.data.certificateType == \"INTERMEDIATE\"  && localStorage.getItem('role') != 'ADMIN')){\r\n            this.isHidden = true;\r\n          }\r\n          if (localStorage.getItem('role') != 'ADMIN'){\r\n            this.isHiddenRole = true;\r\n          }\r\n        })\r\n        .catch(console.log(\"Didn't set certificate info!\"));\r\n    },\r\n    setCertificateInfo(item) {\r\n      this.commonName = item.commonName;\r\n      this.givenName = item.givenName;\r\n      this.surname = item.surname;\r\n      this.organization = item.organization;\r\n      this.organizationalUnitName = item.organizationalUnitName;\r\n      this.organizationEmail = item.organizationEmail;\r\n      this.countryCode = item.countryCode;\r\n      this.alias = item.alias;\r\n      this.endDate = item.endDate;\r\n      this.certificateType = item.certificateType;\r\n      this.certificatePurposeType = item.certificatePurposeType;\r\n      this.issuerSerialNumber = item.issuerSerialNumber;\r\n      this.issuerAlias = item.issuerSerialNumber;\r\n    },\r\n    createCertificate() {\r\n       localStorage.setItem(\"endDate\", this.endDate);\r\n       localStorage.setItem(\"issuerAlias\", this.alias);\r\n       localStorage.setItem(\"issuerSerialNumber\", this.serialNbr);\r\n       window.location.href = \"https://localhost:8081/createOtherCertificates\";\r\n    },\r\n    revokeCertificate() {\r\n      this.$http\r\n        .put(\r\n          \"https://localhost:8080/certificate/revokeCertificate/\" + this.serialNbr\r\n          , {}, {\r\n            headers:{\r\n              'Authorization':\"Bearer \"+ this.token\r\n            }\r\n        })\r\n        .then((resp) => {\r\n          console.log(resp.data);\r\n          alert(\"You have successfully revoked the certificate.\");\r\n          window.location.href = \"https://localhost:8081/invalidCertificates\";\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n    downloadCertificate() {\r\n      this.$http\r\n        .get(\"https://localhost:8080/certificate/loadToFile/\" + this.serialNbr, {\r\n        headers:{\r\n            'Authorization':\"Bearer \"+ this.token\r\n        }})\r\n        .then((resp) => {\r\n          console.log(resp.data);\r\n          alert(\"Successfully downloaded the certificate.\");\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.combo {\r\n  width: 25%;\r\n  margin-left: 42%;\r\n}\r\n\r\n.center {\r\n  margin-left: 50%;\r\n  padding: 10px;\r\n}\r\n</style>\r\n"]}]}